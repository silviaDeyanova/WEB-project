<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../css/forum_style.css" rel="stylesheet">
    <title>Форум - Алумни клуб ФМИ</title>
  </head>
  <body>
    <header id="header">
        <section class="container">
            <img src="../img/fmi-logo-bg.png" class="logo" alt="logo">
            <nav class="top-nav">
              <ul>
                <li><a href="../front-end/profile/profile.html">Профил</a></li>
                <li><a href="../front-end/events/events.html">Събития</a></li>
                <li><a href="forum.html">Форум</a></li>
              </ul>
            </nav>
        </section>
    <section class="overlay">
          <h1>
              Форум
          </h1>
    </secction>
    </header>
    <article class="topic">
        <section class="add_topic"></section>
        <form>
            
                <input type="text" placeholder="Тема" class="my_topic" minlength="1" required>
                <input type="text" placeholder="Описание" class="my_content" minlength="1" required>
                <button>Добави тема</button>
            
        </form>
        <section class="topics"></section>
    </article>
    <article class="main">
        <ol>
        </ol>
    </article>
    <script src="forum_data.js"></script> 
    <script>
        console.log(threads);
        let container=document.querySelector('ol');

            function addThread(thread){
                let threadhtml=`
                <li class="row">
                <a href="discussion_page.html?${thread.id}">
                    <h4 class="title">${thread.title} </h4>
                    <section class="bottom">
                        <p class="time">${new Date(thread.date).toLocaleString()}</p>
                        
                    </section>
                </a>
                </li>
                `
                container.insertAdjacentHTML('beforeend',threadhtml);
            }

            
            for(let thread of threads){
                addThread(thread);
            }

            let btn =document.querySelector('button');
            btn.addEventListener('click',function(){
            let my_topic=document.querySelector('.my_topic');
            let my_content=document.querySelector('.my_content');
            var top={
                title:my_topic.value,
                content:my_content.value,
                date:Date.now(),
                author: 'Студент'
            }
            addThread(top);
            my_topic.value='';
            my_content.value='';
            threads.push(top);
            localStorage.setItem('threads',JSON.stringify(threads));
        });
        //window.localStorage.clear();
    </script>
</body>
</html>
